---
name:  geocloud007
title: 地球云计算 007：奋进号历险记（上）
date:  2017-4-10
tags: 地球云计算
---
<!-- more -->
![](/cnblog/uploads/geocloud007.jpg)

上回书说道，2013 年奋进号（Endeavour）超算机接入了 NASA 的高性能计算中心（NAS HPCC）。这一日，我所在的 NASA 数学地球研究组（NASA Earth Exchange）迎来了一位贵客，就是硅谷图形公司（Silicon Graphics, Inc，大名鼎鼎的 SGI）的 CTO，Eng Lim Goh博士。

![](/uploads/geocloud007a.jpg)
Dr. Eng Lim Goh博士

Goh博士1989年加入 SGI，1998 年做到了总工程师，2001 年起一直担任 SGI 的 CTO。研究兴趣是从数据密集型计算和机器学习。2005年，InfoWorld杂志将Goh博士列入世界上最具影响力的25位CTO。根据Goh博士的亚洲面孔、年纪，名字拼写以及在英国的求学经历，我感到这是一位南洋亚裔精英，父辈可能是马来华人或新加坡人。在读李光耀传时，看到不少人名的闽南语（hokkien）拼法，Lim 一般是「林」，Goh基本上是「吴」，Eng不太清楚，有可能是「永」。吴博士一路走来，这个名字的发音之难想必带来不少的困扰，但是大丈夫行不改名 ，坐不改姓，终成业界翘楚。

聊到 SGI，顺便说一句。我们这个时代的不少人都是从 OpenGL 、侏罗纪公园知道 SGI 的，SGI是从做图形起家的，OpenGL也是SGI最先提出的。有的朋友玩过图形工作站，在这方面 SGI 还有不少忠实的 Fans。创投圈大家喜闻乐见的李开复老师，也是 SGI 的前员工。SGI 的创办人是传奇人物 James Clark，此人出生穷苦，高中辍学后进入海军，当了四年水手。读夜校上的大学学物理，最后在犹他大学拿的计算机博士。此人还是网景公司（Netscape）的创始人，算是硅谷的精神偶像之一。

![](/uploads/geocloud007b.jpg)
克拉克跟他的第四任老婆，维密模特Kristy Hinze

我本来的工作跟 SGI 毫无瓜葛。原因很简单，SGI就不是伺候一般用户的，软件跟图形工作站搭着卖，平台也不对外开放，想靠自己的牛逼硬件和软件垄断高端市场，只可惜历史证明，打错了算盘。看看介绍硅谷商战的书籍，2000年前后，市场上的 SGI 就已经被pc工作站打到溃不成军了。并不掌握CPU研发技术的SGI只能坐视Dell等PC厂商崛起，后期SGI虽然使用了诸如自制的高性能总线等技术来提升系统性能，无奈CPU只能和别人一样用Pentium，花费昂贵代价搞出来的主机比Dell、HP等公司的产品只快一点而已，自然毫无竞争力可言。2006年3月8日，SGI申请破产保护。几经转卖，目前的老板是HPE慧与科技（Hewlett Packard Enterprise）。

但是SGI的超算系统又有不同，用户很多，据它自己说，世界上 Top500的超算机，一大半都是 SGI 做的。奋进号上的UV2000 系统，也是 SGI 给做的。这个事我感觉吧，伺候大老板跟屌丝的区别就在于，前者在于编着法讲故事，变着法花钱。比方这个 UV2000，牛就牛在其共享内存的架构，这也是吴博士来我们这里宣讲的主要内容，就是下面两张表：
![](/uploads/geocloud007c.jpg)

当年吴博士准备的PPT 上的本来是有两张图的，后面一张是张环状图，很形象的，可惜找不到了。

当然，具体的实现还是socket，node，rack 这些：
![](/uploads/geocloud007d.jpg)

本地的内存的 IO 速度跟远程虚拟内存的速度也是有区别的：
![](/uploads/geocloud007e.jpg)

Endeavour的两个结点，共享内存原来是 4TB，后来给加到 6TB。理论上说，你交单个任务的时候一口气要 2TB的内存，Endeavour也会给你。问题是，在什么情况下你非得同时用到 2TB 的内存，不可？

我当时做的主要是生态系统模拟，数据量虽然大，也是一天一天算的，一张全球的图又可以分区分块，根据需要来调整，实在不需要用到这么大的共享内存。我们组里的技术员也参加了讨论，当时想出来的题目，在Endeavour上先跑一个支持共享内存的ENVI 5.0特别版，然后让 ENVI 去做全球 Landsat 图像的拼接镶嵌。不过这也就是杀鸡牛刀，硬凑的。

吴博士在我们这里把 UV2000 大讲了一通，也就是把问题撂下：基于UV2000 的Endeavour是目前有世界上最大共享内存（？）的高速计算机，其它行业已经在它的支持下实现了种种突破，希望在地学领域也能找到Endeavour可以助力的题目。说完这一句，吴博士翩然而去，留下我们冥思苦想。

有段时间，大家凑一块的时候就聊Endeavour，聊怎么样用它的 2TB 内存，还要显得不是那么太笨？想来想去想不出，咱又不是流体力学，又不是天文演替，又不是 3D 建模，又不是热带气旋模拟。遥感卫星资料在体量上虽然大，都是些时空片断，搞分布式计算虽然麻烦些，在概念上却非常容易。能有什么样的地学模型、工具不容易分布式化，从而需要共享内存计算模型来介入？无果。

一年以后，我终于为Endeavour在地学领域找到了一个题目，而且非它不可，所谓棋逢对手，将遇良材，金风玉露一相逢，便胜却人间无数。

且听下回分解。